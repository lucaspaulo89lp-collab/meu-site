<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Loja | PlayTiger Entertainment</title>
  <meta name="description" content="Loja fict√≠cia de skins, temas e n√≠veis usando Tiger Coins (sem valor real)." />
  <script src="../wallet.js"></script>
  <style>
    :root{--card:rgba(255,255,255,.07);--stroke:rgba(255,255,255,.14);--r:18px}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;color:var(--pt-text)}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:26px 18px 50px}
    h1{margin:0 0 6px;font-size:28px;letter-spacing:-.5px}
    p{margin:0;color:var(--pt-muted);line-height:1.6}
    .top{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    .btn{
      display:inline-flex;align-items:center;gap:10px;
      padding:10px 12px;border-radius:14px;
      border:1px solid var(--stroke);background:rgba(255,255,255,.06);
      font-weight:900;
    }
    .grid{margin-top:14px;display:grid;grid-template-columns:1.1fr .9fr;gap:12px}
    .card{border:1px solid var(--stroke);background:var(--card);border-radius:22px;padding:16px}
    .sec{margin-top:10px}
    .sec h2{margin:0 0 10px;font-size:18px}
    .items{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .item{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      border-radius:18px;padding:12px;
      display:flex;flex-direction:column;gap:8px;
    }
    .item b{font-size:14px}
    .item small{color:var(--pt-muted);line-height:1.45}
    .price{display:flex;justify-content:space-between;align-items:center;font-weight:900}
    .tag{font-size:12px;color:rgba(255,255,255,.85);opacity:.9}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:4px}
    .mini-btn{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      border-radius:999px;
      padding:8px 10px;
      font-weight:900;
      cursor:pointer;
      color:rgba(255,255,255,.92);
    }
    .mini-btn.primary{
      border:0;
      background:linear-gradient(135deg,var(--pt-brand),var(--pt-brand2));
      color:#06111f;
    }
    .note{
      margin-top:12px;
      padding:12px 14px;border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.18);
      color:rgba(255,255,255,.86);
      font-size:13px;line-height:1.55;
    }
    .preview{
      height:160px;border-radius:18px;border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      display:grid;place-items:center;
      overflow:hidden;
      position:relative;
    }
    .chip{
      position:absolute;left:12px;top:12px;
      padding:8px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      font-weight:900;font-size:12px;
    }
    .tiger{
      width:120px;height:70px;border-radius:18px;
      background: linear-gradient(135deg,var(--pt-brand2),var(--pt-brand));
      position:relative;
    }
    .tiger:before{
      content:"";position:absolute;right:-10px;top:18px;
      width:28px;height:22px;border-radius:10px;
      background: rgba(255,255,255,.25);
    }
    .stripe{position:absolute;top:12px;left:18px;width:6px;height:46px;background:rgba(0,0,0,.28)}
    .stripe.s2{left:36px}.stripe.s3{left:54px}.stripe.s4{left:72px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}.items{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>üõçÔ∏è Loja (Tiger Coins)</h1>
        <p>Compre <b>skins</b>, <b>temas</b> e <b>packs de n√≠veis</b> usando moedas fict√≠cias. Sem valor real.</p>
      </div>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <a class="btn" href="../index.html">‚Üê Voltar para Jogos</a>
        <a class="btn" href="/meu-site/">üè† Site</a>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <div class="preview">
          <div class="chip" id="activeLabel">Ativo: tema/skin</div>
          <div class="tiger skin-accent" id="prevTiger">
            <div class="stripe"></div><div class="stripe s2"></div><div class="stripe s3"></div><div class="stripe s4"></div>
          </div>
        </div>

        <div class="note">
          <b>Aviso legal:</b> Tiger Coins s√£o moedas virtuais fict√≠cias, sem valor monet√°rio,
          n√£o podem ser sacadas, vendidas ou convertidas em dinheiro real.
        </div>

        <div class="note">
          <b>Dica:</b> ganhe Coins jogando. Ex.: pontos no Runner, vit√≥ria no Memory, metas no 2048.
        </div>
      </div>

      <div class="card" id="lists">
        <!-- listas renderizadas via JS -->
      </div>
    </div>
  </div>

  <script>
    function renderSection(title, type, items){
      const inv = PT.getInventory();
      const s = PT.getSettings();
      const owned = inv[type] || {};
      const active =
        type === "themes" ? s.theme :
        type === "skins"  ? s.skin  :
        s.levelPack;

      return `
        <div class="sec">
          <h2>${title}</h2>
          <div class="items">
            ${items.map(it=>{
              const isOwned = !!owned[it.id];
              const isActive = active === it.id;
              const price = it.price === 0 ? "Gr√°tis" : `${it.price} Coins`;
              return `
                <div class="item">
                  <b>${it.name}</b>
                  <small>${it.desc}</small>
                  <div class="price">
                    <span class="tag">${isOwned ? "‚úÖ Comprado" : "üîí Bloqueado"}</span>
                    <span>${price}</span>
                  </div>
                  <div class="actions">
                    ${!isOwned ? `<button class="mini-btn primary" onclick="buy('${type}','${it.id}')">Comprar</button>` : ""}
                    ${isOwned && !isActive ? `<button class="mini-btn" onclick="useItem('${type}','${it.id}')">Usar</button>` : ""}
                    ${isOwned && isActive ? `<span class="tag">‚≠ê Ativo</span>` : ""}
                  </div>
                </div>
              `;
            }).join("")}
          </div>
        </div>
      `;
    }

    function rerender(){
      const html =
        renderSection("üé® Temas", "themes", PT.STORE.themes) +
        renderSection("üêÖ Skins", "skins", PT.STORE.skins) +
        renderSection("üéöÔ∏è Packs de N√≠veis", "levels", PT.STORE.levels);

      document.getElementById("lists").innerHTML = html;
      updateActiveLabel();
    }

    function updateActiveLabel(){
      const s = PT.getSettings();
      document.getElementById("activeLabel").textContent =
        `Ativo: tema ${s.theme} ‚Ä¢ skin ${s.skin} ‚Ä¢ n√≠vel ${s.levelPack}`;
      PT.applyCosmetics();
    }

    window.buy = (type, id) => {
      const r = PT.buy(type, id);
      alert(r.msg);
      rerender();
    };

    window.useItem = (type, id) => {
      const s = PT.getSettings();
      if(type === "themes") s.theme = id;
      if(type === "skins")  s.skin = id;
      if(type === "levels") s.levelPack = id;
      PT.setSettings(s);
      rerender();
    };

    document.addEventListener("DOMContentLoaded", () => {
      PT.ensureHUD();
      PT.applyCosmetics();
      rerender();
    });
  </script>
</body>
</html>
